---
description: 수학이나 전산학에 등장하는 멱등성의 의미와 멱등성이 보장되는 HTTP Method를 알아본다.
---

# 멱등성과 멱등성을 지원하는 HTTP 메서드는?(작성중)

### 멱등성(Idempotent)이란?

멱등성은 수학이나 전산학에서 연산을 여러 번 적용하더라도 결과가 달라지지 않는 성질을 의미한다.

이 멱등성을 HTTP Method에 적용하면 동일한 요청을 연속으로 보낸 결과가 같은 효과를 지니면서 서버의 상태도 동일하게 남을 때, 해당 HTTP Method가 멱등성을 가졌다고 말한다.(멱등성을 만족하는 메서드에는 통계 기록 등을 제외하면 어떠한 부수 효과(side effect)도 존재해서는 안된다.)

### 멱등성을 만족하는 HTTP Method는?

멱등성을 만족하는지 확인할 땐 서버의 백엔드 상태만 보면된다. 다만 서버는 멱등성을 보장하지 않으며, 일부 애플리케이션은 개발자의 잘못된 구현으로 멱등성 제약을 어길 수도 있다. 올바르게 구현된 REST API의 `GET`, `HEAD`, `OPTIONS`, `PUT`, `DELETE` 메서드는 멱등성이 보장된다.

#### GET

GET 요청은 서버에 존재하는 리소스를 단순히 읽어오기만 하는 데이터를 조회하는  메서드이기 때문에 여러번 수행되도 결과값은 변하지 않는다. 데이터를 가져오는 요청이 서버의 상태를 변경한다면 그 목적과 맞지않기 때문에 GET 메서드는 멱등성을 만족하도록 구현해야 한다.

* GET 요청을 할 때마다 해당 데이터의 조회수 컬럼의 값이 증가된다면 같은 요청을 여러번 보낼때마다 서버의 상태가 계속 바뀌게 된다. 즉 멱등성을 만족하지 않는다.

#### HEAD, OPTIONS

HEAD와 OPTIONS 메서드 역시 서버에 존재하는 리소스를 조회하는 메서드이기 때문에 GET 요청과 마찬가지로 멱등성을 만족한다고 할 수 있다.

#### PUT

PUT 메서드는 서버에 존재하는 리소스를 요청에 담긴 내용대로 통째로 대체하므로 애플리케이션을 올바르게 구현했다면 여러번 수행해도 결과 값은 변하지 않을 것이다.(요청시마다 서버의 상태가 변경되지 않으니)

POST와의 차이점도 멱등성의 유무인데, POST는 같은 요청을 하더라도 계속 새로운 데이터를 생성하는 반면 PUT은 해당 자원이 있다면 데이터만 덮어쓰기 한다.

#### DELETE

DELETE 메서드는 존재하는 데이터를 삭제하는 메서드이다. 삭제한 결과와 이미 삭제되어 존재하지 않는 데이터를 삭제하려는 시도에 대한 응답 코드는 다르겠지만, 서버의 상태 자체는 변하지 않으므로 올바르게 구현한다면 여러번 수행해도 서버의 상태가 같은 멱등성이 보장된다.

{% hint style="info" %}
HTTP Method의 멱등성에서 상태는 서버의 응답코드가 아닌 서버의 현재 상태를 뜻한다.
{% endhint %}

### 멱등성을 만족할수도 혹은 아닐수도 있는 HTTP Method는?

#### PATCH

PATCH 메서드는 항상 멱등성을 보장한다고 얘기할 수 없다. 다시 말하자면 PATCH는 멱등성을 보장하도록 설계할 수 있지만, 멱등성을 보장하지 않도록 설계할 수도 있다. 서버 애플리케이션의 구현을 PUT과 동일한 방식으로 할 경우 멱등성을 가지게 된다.

{% hint style="info" %}
`PUT은 요청 데이터가 기존의 리소스 데이터로 완전히 덮어씌어지는 반면 PATCH의 경우에는 일부분을 수정할 때 사용한다.`
{% endhint %}

### 멱등성을 만족하지 않는 HTTP Method는?

#### POST

POST 메서드는 다양한 요청을 처리할 수 있는 메서드이다. 서버로 데이터를 전송해 새로운 리소스를 생성하는 역할을 많이 담당한다. 같은 요청을 보낼 경우에 기본키만 증가하면서 같은 내용의 데이터가 계속 생성될 수 있으며 이는 서버의 상태가 변경되는 것을 의미한다. 그러므로 POST 메서드는 멱등성을 만족하지 않는다.

### 추가정보

* 모든 안전한 메서드는 멱등성을 갖지만, 그 반대인 경우(역)는 성립하지 않는다.&#x20;
* HTTP 메서드의 멱등성은 HTTP 스펙의 규약일 뿐, 꼭 지켜야하는 것은 아니다.(하지만 권장!)
